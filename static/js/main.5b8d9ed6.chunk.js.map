{"version":3,"sources":["components/Bug/index.js","App.js","reportWebVitals.js","index.js"],"names":["SIZE","BEHAVIOR","normal","speed","rotation","excited","reducer","state","action","type","active","behavior","newX","x","Math","cos","direction","newY","y","sin","newDirection","random","PI","maxX","windowSize","width","maxY","height","setTimeout","dispatch","EXCITE_TIME","downtime","Bug","props","useReducer","handleTimeStep","useCallback","useEffect","timeStepInterval","setInterval","clearInterval","id","appDispatch","key","escapeTimeout","ESCAPE_TIME","clearTimeout","className","style","left","top","boxShadow","onClick","AWARENESS_RADIUS","getWindowSize","window","innerWidth","innerHeight","newState","newActiveBugs","activeBugs","filter","bugKey","length","inactiveBugs","newInactiveBugs","highScore","Date","now","App","useState","setWindowSize","handleResize","addEventListener","removeEventListener","map","reverse","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5b8d9ed6.chunk.js","sourcesContent":["import { useEffect, useReducer, useCallback } from 'react';\nimport './style.css';\n\nconst TIMESTEP = 20; // ms\nconst SIZE = 50; // px\nconst AWARENESS_RADIUS = 50; // px\nconst BEHAVIOR = {\n  normal: {\n    speed: 1, // px per TIMESTEP\n    rotation: 0.5,\n  },\n  excited: {\n    speed: 2, // range of possible rotations in radians per TIMESTEP\n    rotation: 2,\n  },\n};\nconst ESCAPE_TIME = 90; // seconds\nconst EXCITE_TIME = 5; // seconds\n\nfunction generateInitialState(windowSize) {\n  return {\n    active: true,\n    excited: false,\n    x: Math.random() * windowSize.width,\n    y: Math.random() * windowSize.height,\n    direction: Math.random() * 2 * Math.PI,\n    downtime: 1,\n  };\n}\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"timeStep\":\n      if (!state.active) {\n        return state;\n      }\n\n      const behavior = state.excited ? BEHAVIOR.excited : BEHAVIOR.normal;\n\n      let newX = state.x + behavior.speed * Math.cos(state.direction);\n      let newY = state.y + behavior.speed * Math.sin(state.direction);\n      let newDirection = state.direction + behavior.rotation * (Math.random() - 0.5);\n      newDirection %= 2 * Math.PI;\n      const maxX = action.windowSize.width - SIZE;\n      const maxY = action.windowSize.height - SIZE;\n\n      if (newX < 0) {\n        newX = 0;\n        if (newY < 0) {\n          // top left corner\n          newY = 0;\n          newDirection = newDirection > 5 * Math.PI / 4 ? 0 : Math.PI / 2;\n        } else if (newY > maxY) {\n          // bottom left corner\n          newY = maxY;\n          newDirection = newDirection > 3 * Math.PI / 4 ? 3 * Math.PI / 2 : 0;\n        } else {\n          // left edge\n          newDirection = newDirection > Math.PI ? 3 * Math.PI / 2 : Math.PI / 2;\n        }\n      } else if (newX > maxX) {\n        newX = maxX;\n        if (newY < 0) {\n          // top right corner\n          newY = 0;\n          newDirection = newDirection > 7 * Math.PI / 4 ? Math.PI / 2 : Math.PI;\n        } else if (newY > maxY) {\n          // bottom right corner\n          newY = maxY;\n          newDirection = newDirection > Math.PI / 4 ? Math.PI : 3 * Math.PI / 2;\n        } else {\n          // right edge\n          newDirection = newDirection > Math.PI ? 3 * Math.PI / 2 : Math.PI / 2;\n        }\n      } else {\n        if (newY < 0) {\n          // top edge\n          newY = 0;\n          newDirection = newDirection > 3 * Math.PI / 2 ? 0 : Math.PI;\n        } else if (newY > maxY) {\n          // bottom edge\n          newY = maxY;\n          newDirection = newDirection > Math.PI / 2 ? Math.PI : 0;\n        }\n      }\n\n      return { ...state, x: newX, y: newY, direction: newDirection };\n\n    case \"scare\":\n      if (!state.active || state.excited) {\n        return state;\n      }\n\n      setTimeout(\n        () => action.dispatch({ type: \"calm\" }),\n        EXCITE_TIME * 1000\n      );\n\n      return { ...state, excited: true };\n\n    case \"calm\":\n      return { ...state, excited: false };\n    case \"squash\":\n      if (!state.active) {\n        return state;\n      }\n\n      setTimeout(\n        () => action.dispatch({ type: \"wakeUp\" }),\n        state.downtime * 1000\n      );\n\n      return { ...state, active: false, downtime: state.downtime + 1 };\n\n    case \"wakeUp\":\n      return { ...state, active: true };\n    default:\n      return state;\n  }\n}\n\nfunction Bug(props) {\n  const [state, dispatch] = useReducer(reducer, generateInitialState(props.windowSize));\n\n  const handleTimeStep = useCallback(\n    () => {\n      dispatch({ type: \"timeStep\", windowSize: props.windowSize });\n    },\n    [props.windowSize]\n  );\n\n  useEffect(\n    () => {\n      const timeStepInterval = setInterval(handleTimeStep, TIMESTEP);\n      return () => clearInterval(timeStepInterval);\n    },\n    [handleTimeStep]\n  );\n\n  const { id, appDispatch } = props;\n\n  useEffect(\n    () => {\n      appDispatch({ type: state.active ? \"awoke\" : \"squashed\", key: id });\n\n      if (state.active) {\n        const escapeTimeout = setTimeout(\n          () => {\n            appDispatch({ type: \"escaped\", key: id });\n          },\n          ESCAPE_TIME * 1000\n        );\n        return () => clearTimeout(escapeTimeout);\n      }\n    },\n    [state.active, id, appDispatch]\n  );\n\n  return (\n    <>\n      <div\n        className=\"Bug\"\n        style={{\n          left: state.x,\n          top: state.y,\n          height: SIZE,\n          width: SIZE,\n          boxShadow: state.active ? \"0px 2px 6px rgba(0, 0, 0, 0.5)\" : \"0px 0px 3px rgba(0, 0, 0, 0.5)\",\n        }}\n        onClick={() => dispatch({ type: \"squash\", dispatch: dispatch })}\n      ></div>\n      <div\n        className=\"bugAwareZone\"\n        style={{\n          left: state.x - AWARENESS_RADIUS,\n          top: state.y - AWARENESS_RADIUS,\n          height: AWARENESS_RADIUS * 2 + SIZE,\n          width: AWARENESS_RADIUS * 2 + SIZE,\n        }}\n        onClick={() => dispatch({ type: \"scare\", dispatch: dispatch })}\n      ></div>\n    </>\n    \n  );\n}\n\nexport default Bug;\n","import { useState, useEffect, useReducer } from 'react';\nimport Bug from './components/Bug';\nimport './App.css';\n\nfunction getWindowSize() {\n  return { width: window.innerWidth, height: window.innerHeight };\n}\n\nfunction reducer(state, action) {\n  let newState = state;\n\n  switch (action.type) {\n    case \"squashed\":\n      const newActiveBugs = state.activeBugs.filter(bugKey => bugKey !== action.key);\n\n      if (newActiveBugs.length < state.activeBugs.length) {\n        newState = {\n          ...state,\n          activeBugs: newActiveBugs,\n          inactiveBugs: [...state.inactiveBugs, action.key],\n        };\n      }\n\n      break;\n\n    case \"awoke\":\n      const newInactiveBugs = state.inactiveBugs.filter(bugKey => bugKey !== action.key);\n\n      if (newInactiveBugs.length < state.inactiveBugs.length) {\n        newState = {\n          ...state,\n          activeBugs: [...state.activeBugs, action.key],\n          inactiveBugs: newInactiveBugs,\n        };\n      }\n\n      break;\n\n    case \"escaped\":\n      newState = { ...state, activeBugs: state.activeBugs.filter(bugKey => bugKey !== action.key) };\n      break;\n\n    default:\n  }\n\n  if (newState.inactiveBugs.length > newState.highScore) {\n    newState.highScore = newState.inactiveBugs.length;\n  }\n\n  if (newState.activeBugs.length === 0) {\n    newState.activeBugs = [...newState.activeBugs, Date.now()];\n  }\n\n  return newState;\n}\n\nfunction App() {\n  const [windowSize, setWindowSize] = useState(getWindowSize());\n\n  const [state, dispatch] = useReducer(reducer, {\n    activeBugs: [Date.now()],\n    inactiveBugs: [],\n    highScore: 0,\n  });\n\n  useEffect(() => {\n    const handleResize = () => setWindowSize(getWindowSize());\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <div className=\"scores\">\n        <div>CURRENT SCORE: {state.inactiveBugs.length}</div>\n        <div>HIGH SCORE: {state.highScore}</div>\n      </div>\n      {[\n        ...state.inactiveBugs.map(bugKey => <Bug key={bugKey} id={bugKey} windowSize={windowSize} appDispatch={dispatch} />),\n        ...state.activeBugs.map(bugKey => <Bug key={bugKey} id={bugKey} windowSize={windowSize} appDispatch={dispatch} />).reverse()\n      ]}\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}